<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User update</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

</head>
<body>
    <div class="container">
        <hr>

        <p class="h4 mb-4">Update User</p>
        <a th:href="@{/admin/list}" class="btn btn-primary btn-sm mb-3">
            Go back
        </a>
        <form action="#" th:action="@{/admin/save}" th:object="${userDetails}" method="post" onsubmit="return validateForm()">
            <input type="text"  th:field="*{username}" readonly class="form-control mb-4 w-25" placeholder="Username">
            <input type="text" th:field="*{firstName}" id="firstName" class="form-control mb-4 w-25" placeholder="First name">
            <input type="text" th:field="*{lastName}" id="lastName" class="form-control mb-4 w-25" placeholder="Last name">
            <input type="text" th:field="*{email}" id="email" class="form-control mb-4 w-25" placeholder="Email">
            <select th:field="*{country}" class="form-select mb-4 w-25">
                <option th:each="tempCountry : ${countries}" th:value="${tempCountry}" th:text="${tempCountry}"/>
            </select>
            <button type="submit"  class="btn btn-info col-2">Save</button>
        </form>
        <hr>
    </div>

    <script>
        function validateForm() {
            var firstInput = document.getElementById('firstName');
            var firstName = document.getElementById('firstName').value.trim();
            var lastName = document.getElementById('lastName').value.trim();
            var lastInput = document.getElementById('lastName');
            var email = document.getElementById('email').value.trim();
            var emailInput = document.getElementById('email');
            var nameInputRegex = /^[a-zA-Z]+$/;
            var emailInputRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            //----------------first name --------------

            if (firstName === '') {
                alert('First name cannot be empty');
                firstInput.focus();
                return false;
            }
            if (!nameInputRegex.test(firstName)) {
                alert('First name should contain only letters.');
                firstInput.focus();
                return false;
            }
            // --------------- last name -------------
            if (lastName === '') {
                alert('Last name cannot be empty');
                lastInput.focus();
                return false;
            }
            if (!nameInputRegex.test(lastName)) {
                alert('Last name should contain only letters.');
                firstInput.focus();
                return false;
            }
            //---------------email---------------
            if(email.trim() === ''){
                alert('Email cannot be empty');
                return false;
            }
            if(!emailInputRegex.test(email)){
                alert('Email is not valid');
                emailInput.focus();
                return false;
            }

            return true;
        }
    </script>
</body>
</html>